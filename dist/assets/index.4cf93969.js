import{r as l,b as X,a4 as ee,R as ae,a5 as te,a6 as ie,a7 as P,c as t,C as ne,a8 as b,j as e,a9 as f,A as M,h as y,Z as i,aa as se,T as s,ab as w,y as W,ac as re,ad as oe,ae as ce,af as F,ag as le,ah as de,p as R,F as d,ai as he,aj as pe,ak as g,J as u,al as ue,am as ge,O as me,an as fe,ao as ye,ap as we,aq as A,ar as L,as as q,at as ve,au as ke,av as H,aw as Y}from"./index.2cdbdff1.js";const _e=()=>{const[n,v]=l.exports.useState(1),[o,O]=l.exports.useState(!1),[z,B]=l.exports.useState(""),[Q,k]=l.exports.useState(!1),[V,C]=l.exports.useState(!1),E=X(),{setForm:D,form:a,saveList:$,loading:c,clearLocal:G,privateLink:x}=l.exports.useContext(ee),J=ae(),{library:_,chainId:N,account:h}=J,I=async()=>{try{await $(),v(3)}catch{}},m=r=>{D(p=>({...p,is_private:r,receiving_wallet:h,signatory:h}))};l.exports.useEffect(()=>{K()},[h,a]),l.exports.useEffect(()=>{Z()},[h]),a.amount_in==""&&window.location.replace("/");const Z=async()=>{const{data:{account:r}}=await te.getAccount(h);r&&D(p=>({...p,nonce:r.nonce}))},K=async()=>{const r=await ie(a==null?void 0:a.token_out_metadata.address,_,N,h);if(B(P(r.toString())),+P(r.toString())>=a.amount_out){if(n==3)return;v(2)}},j=async()=>{var r,p;try{O(!0);const T=await ve((r=a==null?void 0:a.token_out_metadata)==null?void 0:r.address,_,N),Ee=await ke((p=a==null?void 0:a.token_out_metadata)==null?void 0:p.address,_,N,T);v(2),B(a.amount_out),H(`${a==null?void 0:a.amount_out} ${a==null?void 0:a.token_out_metadata.symbol} approved`)}catch(T){if(T===void 0)return;Y.error("Opps, something went wrong!",{position:Y.POSITION.BOTTOM_RIGHT})}finally{O(!1)}},S=()=>{G(),E("/")},U=()=>{navigator.clipboard.writeText(x),H("Copied")};return t(ne,{children:[t(b,{children:[e(f,{children:t(M,{style:{margin:"auto"},children:[e(y,{className:a.is_private?"active":"",onClick:()=>m(!0),children:"Private"}),e(y,{onClick:()=>m(!1),className:a.is_private?"":"active",children:"Public"})]})}),e(i,{height:40})]}),t(se,{children:[e(s,{className:"header",as:"h2",size:"s3",uppercase:!0,children:"List Transaction Queue"}),e(i,{height:20}),t(w,{style:{textAlign:"center"},children:[e(s,{color:"#fff",size:"s3",children:W(h||"",9,"***")}),e(s,{color:"#fff",size:"s1",children:"Wallet Id"})]}),e(i,{height:28}),t(re,{justify:"space-between",children:[e(oe,{direction:"column",justify:"space-between",children:e(ce,{children:t(w,{children:[e(s,{color:"#fff",size:"s3",children:"You give"}),t(s,{color:"#fff",size:"s1",children:[a.amount_out," ",a.token_out_metadata.symbol]}),e(i,{height:8}),e(s,{size:"tiny",color:" #E8E6EA",children:"(Escrow fee : 0.125%)"})]})})}),e(F,{children:t(M,{style:{margin:"auto"},children:[e(y,{className:a.is_private?"active":"",onClick:()=>m(!0),children:"Private"}),e(y,{onClick:()=>m(!1),className:a.is_private?"":"active",children:"Public"})]})}),e(le,{direction:"column",justify:"space-between",align:"flex-end",children:e(de,{children:t(w,{children:[e(s,{color:"#fff",size:"s3",children:"You get"}),t(s,{color:"#fff",size:"s1",children:[a.amount_in," ",a.token_in_metadata.symbol]}),e(i,{height:8}),e(s,{size:"tiny",color:" #E8E6EA",children:"(Escrow fee :0.125%)"})]})})})]}),e(i,{height:20}),Ce(n),e(i,{height:20}),t(f,{style:{flexDirection:"column"},children:[t(F,{children:[e(i,{height:52}),e(w,{children:t(s,{as:"div",color:"#E8E6EA",size:"s1",uppercase:!0,children:["NB:"," ",e("div",{onClick:()=>k(!0),style:{textDecoration:"underline",display:"inline-block"},children:"Escrow"})," ","Fee Applies"]})})]}),x?t(R,{children:[e(i,{height:24}),t(d,{children:[t(s,{as:"div",size:"s1",color:"#E8E6EA",uppercase:!0,children:[" ",t("span",{children:["Private link:"," ",W(x||"",50,"...","end")]})]}),e(i,{width:5}),e(he,{style:{cursor:"pointer"},onClick:U,children:e(pe,{})})]}),e(i,{height:20}),e(g,{className:"primary m-sm",onClick:S,children:"Ok"})]}):t(R,{children:[e(i,{height:24}),e(b,{children:n<3?t(d,{children:[Number(z)<a.amount_out?e(u,{loading:c||o,disabled:c||o,classNames:"secondary",onClick:()=>j(),text:"Approve"}):e(u,{classNames:"secondary",text:"List Token",onClick:()=>I(),loading:c||o,disabled:c||o}),e(i,{width:41}),e(g,{className:"",onClick:S,children:"Cancel"})]}):t(d,{children:[e(u,{classNames:"secondary semi-rounded lg",onClick:()=>C(!0),text:"Share your Offer"}),e(i,{width:8}),e(g,{onClick:()=>E("/"),className:"semi-rounded lg",children:"View Listed Coin"})]})}),e(F,{children:n<3?t(d,{children:[Number(z)<a.amount_out?e(u,{loading:c||o,disabled:c||o,classNames:"secondary",onClick:()=>j(),text:"Approve"}):e(u,{classNames:"secondary",text:"List Token",onClick:()=>I(),loading:c||o,disabled:c||o}),e(i,{width:41}),e(g,{className:"",onClick:S,children:"Cancel"})]}):t(d,{children:[e(u,{classNames:"secondary semi-rounded lg",onClick:()=>C(!0),text:"Share your Offer"}),e(i,{width:8}),e(g,{onClick:()=>E("/"),className:"semi-rounded lg",children:"View Listed Coin"})]})})]})]}),e(i,{height:35}),e(i,{height:24}),t(ue,{children:[t(d,{align:"end",justify:"center",children:[e(ge,{}),e(i,{width:24}),e(s,{style:{top:"-12px",position:"relative"},size:"s1",uppercase:!0,color:"#FFFFFF",children:"Thanks for trading with us"})]}),e(i,{height:47}),e(f,{style:{flexDirection:"column"},children:e(s,{size:"s2",weight:"300",color:"#E8E6EA",children:"Your money is safe in our Escrow"})})]})]}),e(i,{height:20}),e(b,{children:e(f,{children:t(s,{as:"div",size:"s1",uppercase:!0,children:["NB:"," ",e("div",{onClick:()=>k(!0),style:{textDecoration:"underline",display:"inline-block"},children:"Escrow"})," ","Fee Applies"]})})}),e(me,{show:Q,headerText:"Escrow Fee",type:"info",handleClose:()=>k(!1),msg:"Escrow Fee is a trading fee we charge to guarantee you a secured transaction. We charge from both parties to safe guard token transactions. Our fee\u2019s are not more than 3% per trade. If trades are cancelled at any point in the transaction queue, we would refund all payments inclusive of the Escrow Fee. We provide this feature on all token and coin transactions on our platform. If you have anymore questions please reach us on our email support@vetme.com or via our telegram platform. Thanks for trading with us."}),a._id&&e(fe,{show:V,handleClose:()=>C(!1),headerText:"Share offer via",url:ye(a._id)})]})},Ce=n=>t(we,{status:n,children:[e(A,{className:n>=1?"active":"",rightMsg:n==1?"Transaction  Opened":"",children:e(L,{color:n>=1?"#BEFECD":""})}),e(d,{align:"center",style:{width:"162px"},children:e(q,{color:n>=2?"#BEFECD":""})}),e(A,{className:n>=2?"active":"",rightMsg:n==2?"Approved":"",children:e(L,{color:n>=2?"#BEFECD":""})}),e(d,{align:"center",style:{width:"162px"},children:e(q,{color:n>=3?"#BEFECD":""})}),e(A,{className:n>=3?"active":"",rightMsg:n==3?"Coin Listed":"",children:e(L,{color:n>=3?"#BEFECD":""})})]});export{_e as default};
